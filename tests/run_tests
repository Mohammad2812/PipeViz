total=0
passed=0
failed=0

red='\033[0;31m'
green='\033[0;32m'
reset='\033[0m'

for test in `ls -d */`
do
  echo "Testing: $test"
  total=$(( $total + 1 ))
  script=`(cd $test ; ls *test)`
  result=`(cd $test ; bash ./$script)`
  if [[ $result == 'fail' ]]
  then
    failed=$(( $failed + 1 ))
    echo "$red \tFail $reset"
  else
    passed=$(( $passed + 1 ))
    echo "$green \tPass $reset"
  fi
done

echo "Tests: $green $passed passed, $red $failed failed, $reset $total total\a"
