if [[ ! -e $1 ]]
then
  printf "File $1 not found.\n"
  exit 1
fi

dot_file=$1.dot
normalize_config $1 > normalized_config.txt
replace_parameter_files normalized_config.txt > flat_config.txt
parse_pipe.awk flat_config.txt > $dot_file
rm normalized_config.txt flat_config.txt

if [[ $2 == png ]]
then
  dot -Tpng -O $dot_file
fi
