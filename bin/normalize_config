# This script will recursively build a config file.
# This is to handle external pipelines.

config_file=$1
prefix=""

while read line
do
  line_type=`echo $line | cut -d ' ' -f 1`
  if [[ $line_type == "Pipeline" ]]
  then
    pipeline_file=`echo $line | cut -d ' ' -f 2`
    normalize_config ../$prefix$pipeline_file
  elif [[ $line_type == "Prefix" ]]
  then
    prefix=`echo $line | cut -d ' ' -f 2`
    echo $line
  else
    echo $line
  fi
done < $config_file
