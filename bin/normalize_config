# This script will recursively build a config file.
# This is to handle external pipelines.

config_file=$1

while read line
do
  line_type=`echo $line | cut -d ' ' -f 1`
  if [[ $line_type == "Pipeline" ]]
  then
    echo "# StartOfPipeline"
    pipeline_file=`echo $line | cut -d ' ' -f 2`
    normalize_config ../$pipeline_file
    echo "# EndOfPipeline"
  else
    echo $line
  fi
done < $config_file
